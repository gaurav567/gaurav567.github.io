---
layout: post
title: Revealing economic growth using satellite imagery
published: true
---

After having worked in several developing countries, I've noticed that socio-economic data that is readily available in countries like the US - data we take for granted - is often unavailable in emerging markets. The means of collecting basic socio-economic data often simply aren't there. So then, how do we measure economic growth in places where statistics are imprecise or unavailable? 

## An Alternative to Traditional Statistical Methods

Let's look at an example of this issue. Annual GDP data for Syria and Afghanistan, two countries that have endured civil war, are unavailable for certain years, as shown in the figure below.

![Gaps in GDP]({{site.baseurl}}/pgr-me.github.io/images/005-lights-gaps.png){: .center-image}

To fill data gaps such as these, [economists](http://economics.mit.edu/files/8945) and other researchers have used satellite night imagery as a proxy for economic activity. The image of satellite night lights from 2013 shown below suggests that there may be correlations between economic activity and night lights. 

![World Night Lights]({{site.baseurl}}/pgr-me.github.io/images/005-lights-world.png){: .center-image}

<iframe width="100%" height="520" frameborder="0" src="https://api.mapbox.com/styles/v1/petergrasmussen/cipzjwi860000bongr2x6zjnj.html?title=true&access_token=pk.eyJ1IjoicGV0ZXJncmFzbXVzc2VuIiwiYSI6ImcyTGt6SmsifQ.UAnB6ko5COfdQHBXhWkWRw#3/30/40/0" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>

## Methodology

I obtained the satellite night imagery data from [NOAA](http://ngdc.noaa.gov/eog/dmsp/downloadV4composites.html) and GDP data from [World Bank](http://databank.worldbank.org/data/home.aspx). Using these inputs, I performed nearly 200 country-level regressions and estimated the GDPs of over 400 cities. To keep things simple, I used linear regression.

## Results

The results of the country-level regressions are shown below. The 

<iframe width="100%" height="520" frameborder="0" src="https://peter-gray-rasmussen.cartodb.com/viz/5f63c8ce-38e9-11e6-bdfd-0ea31932ec1d/embed_map" allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe>


I developed a two-step approach to to try to answer this question. First, I wanted to identify distinct eras characterized by the use of key words associated with marijuana. Second, I aimed to assess whether words in each era represented larger themes regarding the public's view toards marijuana and the the drug's legality. I summarize the methodology I used below.

![Summary of methodology]({{site.baseurl}}/pgr-me.github.io/images/005-lights-animation.gif){: .center-image}

## Analysis

I performed [TF-IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf) on articles grouped into 5-year chunks of text in order to identify the most important words in each 5-year chunk. The resulting feature set was 1.1 million n-grams, or 1.1 million dimensions(!). To avoid the [curse of dimensionality](https://en.wikipedia.org/wiki/Curse_of_dimensionality) that occurs when one attempts to cluster higher dimensional datasets, I conducted a [principal component analysis (PCA)](https://en.wikipedia.org/wiki/Principal_component_analysis) to reduce the dimensionality of the feature set. 

The PCA results are shown below as a chart showing the number of components versus explained variance. Because there was more than one elbow (as shown in the figure), I decided to compute the cosine similarities at each elbow to see which set of components yielded the best, most intelligible clusters.

![PCA results]({{site.baseurl}}/pgr-me.github.io/images/004-marijuana-pca.png){: .center-image }

I visualized clusters using color-coded cosine similarity matrices provided below. The color of each square represents the relatedness between two five-year text chunks. As you can see, two components resulted in over-clustering while clusters did not really form using twelve components. Nine components yielded the most intelligible clusters.

![Cosine similarity matrices]({{site.baseurl}}/pgr-me.github.io/images/004-marijuana-cosine.png){: .center-image }

Next, I wanted to overlay the top twenty words from each cluster and public sentiment regarding legalizing marijuana. The first cluster ranged from 1965 to the late 1970s, a time when awareness and use of marijuana rapidly increased. Key words from this period were related to crime and enforcement of marijuana laws. The second cluster overlapped with the Reagan administration, and included new terms such as cocaine, a drug that became more popular in the 1980s. The third cluster more or less spanned the George HW Bush and Clinton administrations, and was the first time that medical popped into a cluster's top twenty list. During this time, California, Oregon, Main, Nevada, and Colorado legalized medical marijuana. The fourth cluster occurred around 2005, and included words that don't seem related to marijuana, including 'theater' and 'art'. The fifth cluster ranged from the late 2000s to the present, and included key terms like recreational marijuana. During this time, multiple states have decided to decriminalize and legalize recreational marijuana consumption as Americans have become more supportive of legalizing recreational use of the drug. 

![Key words and sentiment on legalization]({{site.baseurl}}/pgr-me.github.io/images/004-marijuana-sentiment.png){: .center-image }

## Conclusions

In sum, the pre-processing and clustering approach I used succeeded in identifying two intelligible clusters. For the latter half of the 20th century, words associated with marijuana tended to relate to crime, enforcement, and prevention. In the 90s and 2000s, stories on marijuana shifted toward decriminalization, legalization, and recreational marijuana use as public support for legalization increased. Check out my code on [Github](https://github.com/pgr-me/metis_projects/tree/master/04-marijuana) to see the full analysis!